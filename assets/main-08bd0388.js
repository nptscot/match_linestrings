import{p as De,f as ye,a as ue,b as Ge,m as Re,l as He,c as re,S as Qe,i as We,s as ze,L as Ze,d as W,e as z,t as D,g as R,h as Z,o as Ke,j as J,k as T,n as Q,q,r as F,u as A,v as ne,w as Ue,x as Ve,y as M,M as Xe,z as ie,A as he,B as U,C as de,D as me,_ as Ye,E as xe,F as _e,G as ve,H as et,I as le,J as tt,K as be,N as Be,O as fe}from"./Settings-4a4172f4.js";function nt(t,e={}){const n=Number(t[0]),r=Number(t[1]),o=Number(t[2]),i=Number(t[3]);if(t.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const s=[n,r];return De([[s,[o,r],[o,i],[n,i],s]],e.properties,{bbox:t,id:e.id})}const G=11102230246251565e-32,N=134217729,rt=(3+8*G)*G;function ae(t,e,n,r,o){let i,s,l,a,c=e[0],h=r[0],u=0,f=0;h>c==h>-c?(i=c,c=e[++u]):(i=h,h=r[++f]);let p=0;if(u<t&&f<n)for(h>c==h>-c?(s=c+i,l=i-(s-c),c=e[++u]):(s=h+i,l=i-(s-h),h=r[++f]),i=s,l!==0&&(o[p++]=l);u<t&&f<n;)h>c==h>-c?(s=i+c,a=s-i,l=i-(s-a)+(c-a),c=e[++u]):(s=i+h,a=s-i,l=i-(s-a)+(h-a),h=r[++f]),i=s,l!==0&&(o[p++]=l);for(;u<t;)s=i+c,a=s-i,l=i-(s-a)+(c-a),c=e[++u],i=s,l!==0&&(o[p++]=l);for(;f<n;)s=i+h,a=s-i,l=i-(s-a)+(h-a),h=r[++f],i=s,l!==0&&(o[p++]=l);return(i!==0||p===0)&&(o[p++]=i),p}function it(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function X(t){return new Float64Array(t)}const st=(3+16*G)*G,ot=(2+12*G)*G,lt=(9+64*G)*G*G,K=X(4),$e=X(8),Ee=X(12),Se=X(16),B=X(4);function at(t,e,n,r,o,i,s){let l,a,c,h,u,f,p,g,d,m,w,v,L,b,P,$,y,E;const C=t-o,S=n-o,j=e-i,I=r-i;b=C*I,f=N*C,p=f-(f-C),g=C-p,f=N*I,d=f-(f-I),m=I-d,P=g*m-(b-p*d-g*d-p*m),$=j*S,f=N*j,p=f-(f-j),g=j-p,f=N*S,d=f-(f-S),m=S-d,y=g*m-($-p*d-g*d-p*m),w=P-y,u=P-w,K[0]=P-(w+u)+(u-y),v=b+w,u=v-b,L=b-(v-u)+(w-u),w=L-$,u=L-w,K[1]=L-(w+u)+(u-$),E=v+w,u=E-v,K[2]=v-(E-u)+(w-u),K[3]=E;let O=it(4,K),H=ot*s;if(O>=H||-O>=H||(u=t-C,l=t-(C+u)+(u-o),u=n-S,c=n-(S+u)+(u-o),u=e-j,a=e-(j+u)+(u-i),u=r-I,h=r-(I+u)+(u-i),l===0&&a===0&&c===0&&h===0)||(H=lt*s+rt*Math.abs(O),O+=C*h+I*l-(j*c+S*a),O>=H||-O>=H))return O;b=l*I,f=N*l,p=f-(f-l),g=l-p,f=N*I,d=f-(f-I),m=I-d,P=g*m-(b-p*d-g*d-p*m),$=a*S,f=N*a,p=f-(f-a),g=a-p,f=N*S,d=f-(f-S),m=S-d,y=g*m-($-p*d-g*d-p*m),w=P-y,u=P-w,B[0]=P-(w+u)+(u-y),v=b+w,u=v-b,L=b-(v-u)+(w-u),w=L-$,u=L-w,B[1]=L-(w+u)+(u-$),E=v+w,u=E-v,B[2]=v-(E-u)+(w-u),B[3]=E;const oe=ae(4,K,4,B,$e);b=C*h,f=N*C,p=f-(f-C),g=C-p,f=N*h,d=f-(f-h),m=h-d,P=g*m-(b-p*d-g*d-p*m),$=j*c,f=N*j,p=f-(f-j),g=j-p,f=N*c,d=f-(f-c),m=c-d,y=g*m-($-p*d-g*d-p*m),w=P-y,u=P-w,B[0]=P-(w+u)+(u-y),v=b+w,u=v-b,L=b-(v-u)+(w-u),w=L-$,u=L-w,B[1]=L-(w+u)+(u-$),E=v+w,u=E-v,B[2]=v-(E-u)+(w-u),B[3]=E;const Y=ae(oe,$e,4,B,Ee);b=l*h,f=N*l,p=f-(f-l),g=l-p,f=N*h,d=f-(f-h),m=h-d,P=g*m-(b-p*d-g*d-p*m),$=a*c,f=N*a,p=f-(f-a),g=a-p,f=N*c,d=f-(f-c),m=c-d,y=g*m-($-p*d-g*d-p*m),w=P-y,u=P-w,B[0]=P-(w+u)+(u-y),v=b+w,u=v-b,L=b-(v-u)+(w-u),w=L-$,u=L-w,B[1]=L-(w+u)+(u-$),E=v+w,u=E-v,B[2]=v-(E-u)+(w-u),B[3]=E;const _=ae(Y,Ee,4,B,Se);return Se[_-1]}function ut(t,e,n,r,o,i){const s=(e-i)*(n-o),l=(t-o)*(r-i),a=s-l,c=Math.abs(s+l);return Math.abs(a)>=st*c?a:-at(t,e,n,r,o,i,c)}function ft(t,e){var n,r,o=0,i,s,l,a,c,h,u,f=t[0],p=t[1],g=e.length;for(n=0;n<g;n++){r=0;var d=e[n],m=d.length-1;if(h=d[0],h[0]!==d[m][0]&&h[1]!==d[m][1])throw new Error("First and last coordinates in a ring must be the same");for(s=h[0]-f,l=h[1]-p,r;r<m;r++){if(u=d[r+1],a=u[0]-f,c=u[1]-p,l===0&&c===0){if(a<=0&&s>=0||s<=0&&a>=0)return 0}else if(c>=0&&l<=0||c<=0&&l>=0){if(i=ut(s,a,l,c,0,0),i===0)return 0;(i>0&&c>0&&l<=0||i<0&&c<=0&&l>0)&&o++}h=u,l=c,s=a}}return o%2!==0}function ct(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function se(t){return t.type==="Feature"?t.geometry:t}function V(t,e,n={}){if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");const r=ct(t),o=se(e),i=o.type,s=e.bbox;let l=o.coordinates;if(s&&pt(r,s)===!1)return!1;i==="Polygon"&&(l=[l]);let a=!1;for(var c=0;c<l.length;++c){const h=ft(r,l[c]);if(h===0)return!n.ignoreBoundary;h&&(a=!0)}return a}function pt(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}class Je{constructor(e=[],n=ht){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:r}=this,o=n[e];for(;e>0;){const i=e-1>>1,s=n[i];if(r(o,s)>=0)break;n[e]=s,e=i}n[e]=o}_down(e){const{data:n,compare:r}=this,o=this.length>>1,i=n[e];for(;e<o;){let s=(e<<1)+1,l=n[s];const a=s+1;if(a<this.length&&r(n[a],l)<0&&(s=a,l=n[a]),r(l,i)>=0)break;n[e]=l,e=s}n[e]=i}}function ht(t,e){return t<e?-1:t>e?1:0}function Oe(t,e){return t.p.x>e.p.x?1:t.p.x<e.p.x?-1:t.p.y!==e.p.y?t.p.y>e.p.y?1:-1:1}function dt(t,e){return t.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:t.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:t.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?t.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}class Le{constructor(e,n,r,o){this.p={x:e[0],y:e[1]},this.featureId=n,this.ringId=r,this.eventId=o,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(e){return this.p.x===e.p.x&&this.p.y===e.p.y}}function gt(t,e){if(t.type==="FeatureCollection"){const n=t.features;for(let r=0;r<n.length;r++)Pe(n[r],e)}else Pe(t,e)}let x=0,ee=0,te=0;function Pe(t,e){const n=t.type==="Feature"?t.geometry:t;let r=n.coordinates;(n.type==="Polygon"||n.type==="MultiLineString")&&(r=[r]),n.type==="LineString"&&(r=[[r]]);for(let o=0;o<r.length;o++)for(let i=0;i<r[o].length;i++){let s=r[o][i][0],l=null;ee=ee+1;for(let a=0;a<r[o][i].length-1;a++){l=r[o][i][a+1];const c=new Le(s,x,ee,te),h=new Le(l,x,ee,te+1);c.otherEvent=h,h.otherEvent=c,Oe(c,h)>0?(h.isLeftEndpoint=!0,c.isLeftEndpoint=!1):(c.isLeftEndpoint=!0,h.isLeftEndpoint=!1),e.push(c),e.push(h),s=l,te=te+1}}x=x+1}class wt{constructor(e){this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}}function yt(t,e){if(t===null||e===null||t.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.rightSweepEvent)||t.leftSweepEvent.isSamePoint(e.leftSweepEvent)||t.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;const n=t.leftSweepEvent.p.x,r=t.leftSweepEvent.p.y,o=t.rightSweepEvent.p.x,i=t.rightSweepEvent.p.y,s=e.leftSweepEvent.p.x,l=e.leftSweepEvent.p.y,a=e.rightSweepEvent.p.x,c=e.rightSweepEvent.p.y,h=(c-l)*(o-n)-(a-s)*(i-r),u=(a-s)*(r-l)-(c-l)*(n-s),f=(o-n)*(r-l)-(i-r)*(n-s);if(h===0)return!1;const p=u/h,g=f/h;if(p>=0&&p<=1&&g>=0&&g<=1){const d=n+p*(o-n),m=r+p*(i-r);return[d,m]}return!1}function mt(t,e){e=e||!1;const n=[],r=new Je([],dt);for(;t.length;){const o=t.pop();if(o.isLeftEndpoint){const i=new wt(o);for(let s=0;s<r.data.length;s++){const l=r.data[s];if(e&&l.leftSweepEvent.featureId===o.featureId)continue;const a=yt(i,l);a!==!1&&n.push(a)}r.push(i)}else o.isLeftEndpoint===!1&&r.pop()}return n}function _t(t,e){const n=new Je([],Oe);return gt(t,n),mt(n,e)}var vt=_t;function ge(t,e,n={}){const{removeDuplicates:r=!0,ignoreSelfIntersections:o=!0}=n;let i=[];t.type==="FeatureCollection"?i=i.concat(t.features):t.type==="Feature"?i.push(t):(t.type==="LineString"||t.type==="Polygon"||t.type==="MultiLineString"||t.type==="MultiPolygon")&&i.push(ye(t)),e.type==="FeatureCollection"?i=i.concat(e.features):e.type==="Feature"?i.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&i.push(ye(e));const s=vt(ue(i),o);let l=[];if(r){const a={};s.forEach(c=>{const h=c.join(",");a[h]||(a[h]=!0,l.push(c))})}else l=s;return ue(l.map(a=>Ge(a)))}function ce(t,e={}){const n=se(t);switch(!e.properties&&t.type==="Feature"&&(e.properties=t.properties),n.type){case"Polygon":return bt(n,e);case"MultiPolygon":return $t(n,e);default:throw new Error("invalid poly")}}function bt(t,e={}){const r=se(t).coordinates,o=e.properties?e.properties:t.type==="Feature"?t.properties:{};return Te(r,o)}function $t(t,e={}){const r=se(t).coordinates,o=e.properties?e.properties:t.type==="Feature"?t.properties:{},i=[];return r.forEach(s=>{i.push(Te(s,o))}),ue(i)}function Te(t,e){return t.length>1?Re(t,e):He(t[0],e)}function Et(t,e,{ignoreSelfIntersections:n=!0}={ignoreSelfIntersections:!0}){let r=!0;return re(t,o=>{re(e,i=>{if(r===!1)return!1;r=St(o.geometry,i.geometry,n)})}),r}function St(t,e,n){switch(t.type){case"Point":switch(e.type){case"Point":return!Ct(t.coordinates,e.coordinates);case"LineString":return!ke(e,t);case"Polygon":return!V(t,e)}break;case"LineString":switch(e.type){case"Point":return!ke(t,e);case"LineString":return!Lt(t,e,n);case"Polygon":return!Ce(e,t,n)}break;case"Polygon":switch(e.type){case"Point":return!V(e,t);case"LineString":return!Ce(t,e,n);case"Polygon":return!Pt(e,t,n)}}return!1}function ke(t,e){for(let n=0;n<t.coordinates.length-1;n++)if(kt(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Lt(t,e,n){return ge(t,e,{ignoreSelfIntersections:n}).features.length>0}function Ce(t,e,n){for(const o of e.coordinates)if(V(o,t))return!0;return ge(e,ce(t),{ignoreSelfIntersections:n}).features.length>0}function Pt(t,e,n){for(const o of t.coordinates[0])if(V(o,e))return!0;for(const o of e.coordinates[0])if(V(o,t))return!0;return ge(ce(t),ce(e),{ignoreSelfIntersections:n}).features.length>0}function kt(t,e,n){const r=n[0]-t[0],o=n[1]-t[1],i=e[0]-t[0],s=e[1]-t[1];return r*s-o*i!==0?!1:Math.abs(i)>=Math.abs(s)?i>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]}function Ct(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ie(t,e,{ignoreSelfIntersections:n=!0}={}){let r=!1;return re(t,o=>{re(e,i=>{if(r===!0)return!0;r=!Et(o.geometry,i.geometry,{ignoreSelfIntersections:n})})}),r}function Fe(t){let e,n,r,o,i,s,l,a=t[3].features.length+"",c,h,u,f,p,g,d=t[4].features.length+"",m,w,v=t[1].filter(je).length+"",L,b,P,$,y,E,C,S,j,I,O,H;function oe(_){t[19](_)}let Y={onChange:t[9]};return t[6]!==void 0&&(Y.options=t[6]),S=new et({props:Y}),ie.push(()=>he(S,"options",oe)),{c(){e=J("button"),e.textContent="Swap",n=T(),r=J("button"),r.textContent="Zoom to fit",o=T(),i=J("div"),i.textContent="Sources",s=T(),l=J("p"),c=Q(a),h=Q(" sources"),u=T(),f=J("div"),f.textContent="Target",p=T(),g=J("p"),m=Q(d),w=Q(" targets, with "),L=Q(v),b=Q(" matching a source"),P=T(),$=J("label"),y=J("input"),E=Q(`
        Show targets matching a source`),C=T(),W(S.$$.fragment),q(e,"class","btn btn-secondary"),q(r,"class","btn btn-secondary"),U(i,"background",pe),U(f,"background",qe),q(y,"class","form-check-input"),q(y,"type","checkbox"),q($,"class","form-check-label mb-3")},m(_,k){F(_,e,k),F(_,n,k),F(_,r,k),F(_,o,k),F(_,i,k),F(_,s,k),F(_,l,k),A(l,c),A(l,h),F(_,u,k),F(_,f,k),F(_,p,k),F(_,g,k),A(g,m),A(g,w),A(g,L),A(g,b),F(_,P,k),F(_,$,k),A($,y),y.checked=t[5],A($,E),F(_,C,k),z(S,_,k),I=!0,O||(H=[ne(e,"click",t[12]),ne(r,"click",t[11]),ne(y,"change",t[18])],O=!0)},p(_,k){(!I||k&8)&&a!==(a=_[3].features.length+"")&&le(c,a),(!I||k&16)&&d!==(d=_[4].features.length+"")&&le(m,d),(!I||k&2)&&v!==(v=_[1].filter(je).length+"")&&le(L,v),k&32&&(y.checked=_[5]);const we={};!j&&k&64&&(j=!0,we.options=_[6],de(()=>j=!1)),S.$set(we)},i(_){I||(D(S.$$.fragment,_),I=!0)},o(_){R(S.$$.fragment,_),I=!1},d(_){_&&(M(e),M(n),M(r),M(o),M(i),M(s),M(l),M(u),M(f),M(p),M(g),M(P),M($),M(C)),Z(S,_),O=!1,tt(H)}}}function It(t){let e,n,r,o,i,s,l,a,c,h,u,f,p=t[3].features.length>0&&Fe(t);return{c(){e=J("div"),n=J("h1"),n.textContent="Match LineStrings",r=T(),o=J("a"),o.textContent="Looking for the tool to review test cases?",i=T(),s=J("label"),l=Q(`Load two .geojson files
      `),a=J("input"),c=T(),p&&p.c(),q(o,"href","review.html"),q(a,"class","form-control"),q(a,"type","file"),a.multiple=!0,q(s,"class","form-label"),q(e,"slot","left")},m(g,d){F(g,e,d),A(e,n),A(e,r),A(e,o),A(e,i),A(e,s),A(s,l),A(s,a),t[17](a),A(e,c),p&&p.m(e,null),h=!0,u||(f=ne(a,"change",t[10]),u=!0)},p(g,d){g[3].features.length>0?p?(p.p(g,d),d&8&&D(p,1)):(p=Fe(g),p.c(),D(p,1),p.m(e,null)):p&&(Ue(),R(p,1,1,()=>{p=null}),Ve())},i(g){h||(D(p),h=!0)},o(g){R(p),h=!1},d(g){g&&M(e),t[17](null),p&&p.d(),u=!1,f()}}}function Ft(t){let e,n;return e=new Be({props:{manageHoverState:!0,paint:{"line-width":["case",["in",["id"],["literal",t[8]]],8,5],"line-color":pe,"line-opacity":fe(.5,1)}}}),{c(){W(e.$$.fragment)},m(r,o){z(e,r,o),n=!0},p(r,o){const i={};o&256&&(i.paint={"line-width":["case",["in",["id"],["literal",r[8]]],8,5],"line-color":pe,"line-opacity":fe(.5,1)}),e.$set(i)},i(r){n||(D(e.$$.fragment,r),n=!0)},o(r){R(e.$$.fragment,r),n=!1},d(r){Z(e,r)}}}function Mt(t){let e,n,r;function o(s){t[14](s)}let i={manageHoverState:!0,filter:t[5]?void 0:["!",["get","has_match"]],paint:{"line-width":8,"line-color":qe,"line-opacity":fe(["case",["get","has_match"],.5,.2],1)}};return t[0]!==void 0&&(i.hovered=t[0]),e=new Be({props:i}),ie.push(()=>he(e,"hovered",o)),e.$on("click",t[13]),{c(){W(e.$$.fragment)},m(s,l){z(e,s,l),r=!0},p(s,l){const a={};l&32&&(a.filter=s[5]?void 0:["!",["get","has_match"]]),!n&&l&1&&(n=!0,a.hovered=s[0],de(()=>n=!1)),e.$set(a)},i(s){r||(D(e.$$.fragment,s),r=!0)},o(s){R(e.$$.fragment,s),r=!1},d(s){Z(e,s)}}}function Nt(t){let e,n,r,o;return e=new be({props:{data:t[3],$$slots:{default:[Ft]},$$scope:{ctx:t}}}),r=new be({props:{data:t[4],$$slots:{default:[Mt]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment),n=T(),W(r.$$.fragment)},m(i,s){z(e,i,s),F(i,n,s),z(r,i,s),o=!0},p(i,s){const l={};s&8&&(l.data=i[3]),s&1048832&&(l.$$scope={dirty:s,ctx:i}),e.$set(l);const a={};s&16&&(a.data=i[4]),s&1048609&&(a.$$scope={dirty:s,ctx:i}),r.$set(a)},i(i){o||(D(e.$$.fragment,i),D(r.$$.fragment,i),o=!0)},o(i){R(e.$$.fragment,i),R(r.$$.fragment,i),o=!1},d(i){i&&M(n),Z(e,i),Z(r,i)}}}function At(t){let e,n,r,o;function i(l){t[15](l)}let s={style:"https://api.maptiler.com/maps/dataviz/style.json?key=MZEJTanw3WpxRvt7qDfo",standardControls:!0,hash:!0,$$slots:{default:[Nt]},$$scope:{ctx:t}};return t[2]!==void 0&&(s.map=t[2]),n=new Xe({props:s}),ie.push(()=>he(n,"map",i)),n.$on("error",t[16]),{c(){e=J("div"),W(n.$$.fragment),q(e,"slot","main"),U(e,"position","relative"),U(e,"width","100%"),U(e,"height","100vh")},m(l,a){F(l,e,a),z(n,e,null),o=!0},p(l,a){const c={};a&1048889&&(c.$$scope={dirty:a,ctx:l}),!r&&a&4&&(r=!0,c.map=l[2],de(()=>r=!1)),n.$set(c)},i(l){o||(D(n.$$.fragment,l),o=!0)},o(l){R(n.$$.fragment,l),o=!1},d(l){l&&M(e),Z(n)}}}function jt(t){let e,n;return e=new Ze({props:{$$slots:{main:[At],left:[It]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(r,o){z(e,r,o),n=!0},p(r,[o]){const i={};o&1049087&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(D(e.$$.fragment,r),n=!0)},o(r){R(e.$$.fragment,r),n=!1},d(r){Z(e,r)}}}let pe="red",qe="blue";async function Me(t){let e=await t.text(),n=JSON.parse(e),r=0;for(let o of n.features)o.id=r++,o.properties??(o.properties={});return n}function Ne(t){let e=JSON.parse(JSON.stringify(t));return delete e.properties,e}function Ae(t){let e=0;for(let n of t)n.id=e++;return t}const je=t=>t.matching_sources.length>0;function Bt(t,e,n){let r,o,i=me(),s=me(),l=null,a=!0,c={buffer_meters:20,angle_diff_threshold:10,length_ratio_threshold:1.1,midpt_dist_threshold:15},h=[];Ke(async()=>{await Ye()});function u(){try{n(1,h=JSON.parse(xe(JSON.stringify(i),JSON.stringify(s),c)))}catch(y){window.alert(`Bug: ${y}`);return}for(let[y,E]of s.features.entries())E.properties.has_match=h[y].matching_sources.length>0;n(4,s)}let f;async function p(y){if(!f.files)return;if(f.files.length!=2){window.alert("Select two GeoJSON files");return}try{n(3,i=await Me(f.files[0])),n(4,s=await Me(f.files[1])),g(),n(0,l=null),u()}catch(C){window.alert(`Bad input file: ${C}`)}}function g(){let y={type:"FeatureCollection",features:[...i.features,...s.features]};o==null||o.fitBounds(_e(y),{animate:!1,padding:10})}function d(){n(3,[i,s]=[s,i],i,n(4,s)),u()}function m(y){let E=s.features[y.detail.features[0].id],C=nt(_e(E));ve("sources.geojson",JSON.stringify({type:"FeatureCollection",features:Ae(i.features.filter(S=>Ie(S,C)).map(Ne))})),ve("targets.geojson",JSON.stringify({type:"FeatureCollection",features:Ae(s.features.filter(S=>Ie(S,C)).map(Ne))}))}function w(y){l=y,n(0,l)}function v(y){o=y,n(2,o)}const L=y=>{console.log(y.detail.error)};function b(y){ie[y?"unshift":"push"](()=>{f=y,n(7,f)})}function P(){a=this.checked,n(5,a)}function $(y){c=y,n(6,c)}return t.$$.update=()=>{t.$$.dirty&3&&n(8,r=l==null?[]:h[l.id].matching_sources)},[l,h,o,i,s,a,c,f,r,u,p,g,d,m,w,v,L,b,P,$]}class Jt extends Qe{constructor(e){super(),We(this,e,Bt,jt,ze,{})}}new Jt({target:document.getElementById("app")});
