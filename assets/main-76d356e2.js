import{p as Qe,f as ve,a as fe,b as We,m as ze,l as Ze,c as ie,S as Ke,i as Ue,s as Ve,L as Xe,d as W,e as z,t as D,g as H,h as Z,o as Ye,j as A,k as q,n as Q,q as se,r as k,u as j,v as re,w as xe,x as et,y as F,M as tt,z as oe,A as de,B as X,C as ge,D as be,_ as nt,E as rt,F as $e,G as Ee,H as it,I as ue,J as st,K as Se,N as Te,O as ce}from"./Settings-e8a97dfe.js";function ot(t,e={}){const n=Number(t[0]),r=Number(t[1]),o=Number(t[2]),i=Number(t[3]);if(t.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const s=[n,r];return Qe([[s,[o,r],[o,i],[n,i],s]],e.properties,{bbox:t,id:e.id})}const R=11102230246251565e-32,N=134217729,lt=(3+8*R)*R;function ae(t,e,n,r,o){let i,s,u,f,c=e[0],p=r[0],l=0,a=0;p>c==p>-c?(i=c,c=e[++l]):(i=p,p=r[++a]);let h=0;if(l<t&&a<n)for(p>c==p>-c?(s=c+i,u=i-(s-c),c=e[++l]):(s=p+i,u=i-(s-p),p=r[++a]),i=s,u!==0&&(o[h++]=u);l<t&&a<n;)p>c==p>-c?(s=i+c,f=s-i,u=i-(s-f)+(c-f),c=e[++l]):(s=i+p,f=s-i,u=i-(s-f)+(p-f),p=r[++a]),i=s,u!==0&&(o[h++]=u);for(;l<t;)s=i+c,f=s-i,u=i-(s-f)+(c-f),c=e[++l],i=s,u!==0&&(o[h++]=u);for(;a<n;)s=i+p,f=s-i,u=i-(s-f)+(p-f),p=r[++a],i=s,u!==0&&(o[h++]=u);return(i!==0||h===0)&&(o[h++]=i),h}function ut(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function x(t){return new Float64Array(t)}const at=(3+16*R)*R,ft=(2+12*R)*R,ct=(9+64*R)*R*R,K=x(4),Le=x(8),Pe=x(12),Ce=x(16),B=x(4);function pt(t,e,n,r,o,i,s){let u,f,c,p,l,a,h,m,d,w,g,_,E,b,P,S,y,$;const I=t-o,C=n-o,M=e-i,J=r-i;b=I*J,a=N*I,h=a-(a-I),m=I-h,a=N*J,d=a-(a-J),w=J-d,P=m*w-(b-h*d-m*d-h*w),S=M*C,a=N*M,h=a-(a-M),m=M-h,a=N*C,d=a-(a-C),w=C-d,y=m*w-(S-h*d-m*d-h*w),g=P-y,l=P-g,K[0]=P-(g+l)+(l-y),_=b+g,l=_-b,E=b-(_-l)+(g-l),g=E-S,l=E-g,K[1]=E-(g+l)+(l-S),$=_+g,l=$-_,K[2]=_-($-l)+(g-l),K[3]=$;let T=ut(4,K),O=ft*s;if(T>=O||-T>=O||(l=t-I,u=t-(I+l)+(l-o),l=n-C,c=n-(C+l)+(l-o),l=e-M,f=e-(M+l)+(l-i),l=r-J,p=r-(J+l)+(l-i),u===0&&f===0&&c===0&&p===0)||(O=ct*s+lt*Math.abs(T),T+=I*p+J*u-(M*c+C*f),T>=O||-T>=O))return T;b=u*J,a=N*u,h=a-(a-u),m=u-h,a=N*J,d=a-(a-J),w=J-d,P=m*w-(b-h*d-m*d-h*w),S=f*C,a=N*f,h=a-(a-f),m=f-h,a=N*C,d=a-(a-C),w=C-d,y=m*w-(S-h*d-m*d-h*w),g=P-y,l=P-g,B[0]=P-(g+l)+(l-y),_=b+g,l=_-b,E=b-(_-l)+(g-l),g=E-S,l=E-g,B[1]=E-(g+l)+(l-S),$=_+g,l=$-_,B[2]=_-($-l)+(g-l),B[3]=$;const U=ae(4,K,4,B,Le);b=I*p,a=N*I,h=a-(a-I),m=I-h,a=N*p,d=a-(a-p),w=p-d,P=m*w-(b-h*d-m*d-h*w),S=M*c,a=N*M,h=a-(a-M),m=M-h,a=N*c,d=a-(a-c),w=c-d,y=m*w-(S-h*d-m*d-h*w),g=P-y,l=P-g,B[0]=P-(g+l)+(l-y),_=b+g,l=_-b,E=b-(_-l)+(g-l),g=E-S,l=E-g,B[1]=E-(g+l)+(l-S),$=_+g,l=$-_,B[2]=_-($-l)+(g-l),B[3]=$;const G=ae(U,Le,4,B,Pe);b=u*p,a=N*u,h=a-(a-u),m=u-h,a=N*p,d=a-(a-p),w=p-d,P=m*w-(b-h*d-m*d-h*w),S=f*c,a=N*f,h=a-(a-f),m=f-h,a=N*c,d=a-(a-c),w=c-d,y=m*w-(S-h*d-m*d-h*w),g=P-y,l=P-g,B[0]=P-(g+l)+(l-y),_=b+g,l=_-b,E=b-(_-l)+(g-l),g=E-S,l=E-g,B[1]=E-(g+l)+(l-S),$=_+g,l=$-_,B[2]=_-($-l)+(g-l),B[3]=$;const V=ae(G,Pe,4,B,Ce);return Ce[V-1]}function ht(t,e,n,r,o,i){const s=(e-i)*(n-o),u=(t-o)*(r-i),f=s-u,c=Math.abs(s+u);return Math.abs(f)>=at*c?f:-pt(t,e,n,r,o,i,c)}function dt(t,e){var n,r,o=0,i,s,u,f,c,p,l,a=t[0],h=t[1],m=e.length;for(n=0;n<m;n++){r=0;var d=e[n],w=d.length-1;if(p=d[0],p[0]!==d[w][0]&&p[1]!==d[w][1])throw new Error("First and last coordinates in a ring must be the same");for(s=p[0]-a,u=p[1]-h,r;r<w;r++){if(l=d[r+1],f=l[0]-a,c=l[1]-h,u===0&&c===0){if(f<=0&&s>=0||s<=0&&f>=0)return 0}else if(c>=0&&u<=0||c<=0&&u>=0){if(i=ht(s,f,u,c,0,0),i===0)return 0;(i>0&&c>0&&u<=0||i<0&&c<=0&&u>0)&&o++}p=l,u=c,s=f}}return o%2!==0}function gt(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function le(t){return t.type==="Feature"?t.geometry:t}function Y(t,e,n={}){if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");const r=gt(t),o=le(e),i=o.type,s=e.bbox;let u=o.coordinates;if(s&&wt(r,s)===!1)return!1;i==="Polygon"&&(u=[u]);let f=!1;for(var c=0;c<u.length;++c){const p=dt(r,u[c]);if(p===0)return!n.ignoreBoundary;p&&(f=!0)}return f}function wt(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}class qe{constructor(e=[],n=yt){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:r}=this,o=n[e];for(;e>0;){const i=e-1>>1,s=n[i];if(r(o,s)>=0)break;n[e]=s,e=i}n[e]=o}_down(e){const{data:n,compare:r}=this,o=this.length>>1,i=n[e];for(;e<o;){let s=(e<<1)+1,u=n[s];const f=s+1;if(f<this.length&&r(n[f],u)<0&&(s=f,u=n[f]),r(u,i)>=0)break;n[e]=u,e=s}n[e]=i}}function yt(t,e){return t<e?-1:t>e?1:0}function De(t,e){return t.p.x>e.p.x?1:t.p.x<e.p.x?-1:t.p.y!==e.p.y?t.p.y>e.p.y?1:-1:1}function mt(t,e){return t.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:t.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:t.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?t.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}class Ie{constructor(e,n,r,o){this.p={x:e[0],y:e[1]},this.featureId=n,this.ringId=r,this.eventId=o,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(e){return this.p.x===e.p.x&&this.p.y===e.p.y}}function _t(t,e){if(t.type==="FeatureCollection"){const n=t.features;for(let r=0;r<n.length;r++)ke(n[r],e)}else ke(t,e)}let ee=0,te=0,ne=0;function ke(t,e){const n=t.type==="Feature"?t.geometry:t;let r=n.coordinates;(n.type==="Polygon"||n.type==="MultiLineString")&&(r=[r]),n.type==="LineString"&&(r=[[r]]);for(let o=0;o<r.length;o++)for(let i=0;i<r[o].length;i++){let s=r[o][i][0],u=null;te=te+1;for(let f=0;f<r[o][i].length-1;f++){u=r[o][i][f+1];const c=new Ie(s,ee,te,ne),p=new Ie(u,ee,te,ne+1);c.otherEvent=p,p.otherEvent=c,De(c,p)>0?(p.isLeftEndpoint=!0,c.isLeftEndpoint=!1):(c.isLeftEndpoint=!0,p.isLeftEndpoint=!1),e.push(c),e.push(p),s=u,ne=ne+1}}ee=ee+1}class vt{constructor(e){this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}}function bt(t,e){if(t===null||e===null||t.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.rightSweepEvent)||t.leftSweepEvent.isSamePoint(e.leftSweepEvent)||t.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;const n=t.leftSweepEvent.p.x,r=t.leftSweepEvent.p.y,o=t.rightSweepEvent.p.x,i=t.rightSweepEvent.p.y,s=e.leftSweepEvent.p.x,u=e.leftSweepEvent.p.y,f=e.rightSweepEvent.p.x,c=e.rightSweepEvent.p.y,p=(c-u)*(o-n)-(f-s)*(i-r),l=(f-s)*(r-u)-(c-u)*(n-s),a=(o-n)*(r-u)-(i-r)*(n-s);if(p===0)return!1;const h=l/p,m=a/p;if(h>=0&&h<=1&&m>=0&&m<=1){const d=n+h*(o-n),w=r+h*(i-r);return[d,w]}return!1}function $t(t,e){e=e||!1;const n=[],r=new qe([],mt);for(;t.length;){const o=t.pop();if(o.isLeftEndpoint){const i=new vt(o);for(let s=0;s<r.data.length;s++){const u=r.data[s];if(e&&u.leftSweepEvent.featureId===o.featureId)continue;const f=bt(i,u);f!==!1&&n.push(f)}r.push(i)}else o.isLeftEndpoint===!1&&r.pop()}return n}function Et(t,e){const n=new qe([],De);return _t(t,n),$t(n,e)}var St=Et;function we(t,e,n={}){const{removeDuplicates:r=!0,ignoreSelfIntersections:o=!0}=n;let i=[];t.type==="FeatureCollection"?i=i.concat(t.features):t.type==="Feature"?i.push(t):(t.type==="LineString"||t.type==="Polygon"||t.type==="MultiLineString"||t.type==="MultiPolygon")&&i.push(ve(t)),e.type==="FeatureCollection"?i=i.concat(e.features):e.type==="Feature"?i.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&i.push(ve(e));const s=St(fe(i),o);let u=[];if(r){const f={};s.forEach(c=>{const p=c.join(",");f[p]||(f[p]=!0,u.push(c))})}else u=s;return fe(u.map(f=>We(f)))}function pe(t,e={}){const n=le(t);switch(!e.properties&&t.type==="Feature"&&(e.properties=t.properties),n.type){case"Polygon":return Lt(n,e);case"MultiPolygon":return Pt(n,e);default:throw new Error("invalid poly")}}function Lt(t,e={}){const r=le(t).coordinates,o=e.properties?e.properties:t.type==="Feature"?t.properties:{};return Ge(r,o)}function Pt(t,e={}){const r=le(t).coordinates,o=e.properties?e.properties:t.type==="Feature"?t.properties:{},i=[];return r.forEach(s=>{i.push(Ge(s,o))}),fe(i)}function Ge(t,e){return t.length>1?ze(t,e):Ze(t[0],e)}function Ct(t,e,{ignoreSelfIntersections:n=!0}={ignoreSelfIntersections:!0}){let r=!0;return ie(t,o=>{ie(e,i=>{if(r===!1)return!1;r=It(o.geometry,i.geometry,n)})}),r}function It(t,e,n){switch(t.type){case"Point":switch(e.type){case"Point":return!Nt(t.coordinates,e.coordinates);case"LineString":return!Fe(e,t);case"Polygon":return!Y(t,e)}break;case"LineString":switch(e.type){case"Point":return!Fe(t,e);case"LineString":return!kt(t,e,n);case"Polygon":return!Me(e,t,n)}break;case"Polygon":switch(e.type){case"Point":return!Y(e,t);case"LineString":return!Me(t,e,n);case"Polygon":return!Ft(e,t,n)}}return!1}function Fe(t,e){for(let n=0;n<t.coordinates.length-1;n++)if(Mt(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function kt(t,e,n){return we(t,e,{ignoreSelfIntersections:n}).features.length>0}function Me(t,e,n){for(const o of e.coordinates)if(Y(o,t))return!0;return we(e,pe(t),{ignoreSelfIntersections:n}).features.length>0}function Ft(t,e,n){for(const o of t.coordinates[0])if(Y(o,e))return!0;for(const o of e.coordinates[0])if(Y(o,t))return!0;return we(pe(t),pe(e),{ignoreSelfIntersections:n}).features.length>0}function Mt(t,e,n){const r=n[0]-t[0],o=n[1]-t[1],i=e[0]-t[0],s=e[1]-t[1];return r*s-o*i!==0?!1:Math.abs(i)>=Math.abs(s)?i>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]}function Nt(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ne(t,e,{ignoreSelfIntersections:n=!0}={}){let r=!1;return ie(t,o=>{ie(e,i=>{if(r===!0)return!0;r=!Ct(o.geometry,i.geometry,{ignoreSelfIntersections:n})})}),r}function Ae(t){let e,n,r,o,i,s,u,f,c,p,l,a=t[3].features.length+"",h,m,d,w,g,_,E=t[4].features.length+"",b,P,S=t[1].filter(Oe).length+"",y,$,I,C,M,J,T,O,U,G,V,ye;function He(v){t[19](v)}let me={onChange:t[9]};return t[6]!==void 0&&(me.options=t[6]),O=new it({props:me}),oe.push(()=>de(O,"options",He)),{c(){e=A("hr"),n=q(),r=A("div"),o=A("button"),o.textContent="Swap",i=q(),s=A("div"),u=A("button"),u.textContent="Zoom to fit",f=q(),c=A("div"),c.textContent="Sources",p=q(),l=A("p"),h=Q(a),m=Q(" sources"),d=q(),w=A("div"),w.textContent="Target",g=q(),_=A("p"),b=Q(E),P=Q(" targets, with "),y=Q(S),$=Q(" matching a source"),I=q(),C=A("label"),M=A("input"),J=Q(`
        Show targets matching a source`),T=q(),W(O.$$.fragment),X(c,"background",he),X(w,"background",Re),se(M,"type","checkbox")},m(v,L){k(v,e,L),k(v,n,L),k(v,r,L),j(r,o),k(v,i,L),k(v,s,L),j(s,u),k(v,f,L),k(v,c,L),k(v,p,L),k(v,l,L),j(l,h),j(l,m),k(v,d,L),k(v,w,L),k(v,g,L),k(v,_,L),j(_,b),j(_,P),j(_,y),j(_,$),k(v,I,L),k(v,C,L),j(C,M),M.checked=t[5],j(C,J),k(v,T,L),z(O,v,L),G=!0,V||(ye=[re(o,"click",t[12]),re(u,"click",t[11]),re(M,"change",t[18])],V=!0)},p(v,L){(!G||L&8)&&a!==(a=v[3].features.length+"")&&ue(h,a),(!G||L&16)&&E!==(E=v[4].features.length+"")&&ue(b,E),(!G||L&2)&&S!==(S=v[1].filter(Oe).length+"")&&ue(y,S),L&32&&(M.checked=v[5]);const _e={};!U&&L&64&&(U=!0,_e.options=v[6],ge(()=>U=!1)),O.$set(_e)},i(v){G||(D(O.$$.fragment,v),G=!0)},o(v){H(O.$$.fragment,v),G=!1},d(v){v&&(F(e),F(n),F(r),F(i),F(s),F(f),F(c),F(p),F(l),F(d),F(w),F(g),F(_),F(I),F(C),F(T)),Z(O,v),V=!1,st(ye)}}}function At(t){let e,n,r,o,i,s,u,f,c,p,l=t[3].features.length>0&&Ae(t);return{c(){e=A("div"),n=A("h1"),n.textContent="Match LineStrings",r=q(),o=A("label"),i=Q(`Load two .geojson files
      `),s=A("input"),u=q(),l&&l.c(),se(s,"type","file"),s.multiple=!0,se(e,"slot","left")},m(a,h){k(a,e,h),j(e,n),j(e,r),j(e,o),j(o,i),j(o,s),t[17](s),j(e,u),l&&l.m(e,null),f=!0,c||(p=re(s,"change",t[10]),c=!0)},p(a,h){a[3].features.length>0?l?(l.p(a,h),h&8&&D(l,1)):(l=Ae(a),l.c(),D(l,1),l.m(e,null)):l&&(xe(),H(l,1,1,()=>{l=null}),et())},i(a){f||(D(l),f=!0)},o(a){H(l),f=!1},d(a){a&&F(e),t[17](null),l&&l.d(),c=!1,p()}}}function jt(t){let e,n;return e=new Te({props:{manageHoverState:!0,paint:{"line-width":["case",["in",["id"],["literal",t[8]]],8,5],"line-color":he,"line-opacity":ce(.5,1)}}}),{c(){W(e.$$.fragment)},m(r,o){z(e,r,o),n=!0},p(r,o){const i={};o&256&&(i.paint={"line-width":["case",["in",["id"],["literal",r[8]]],8,5],"line-color":he,"line-opacity":ce(.5,1)}),e.$set(i)},i(r){n||(D(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Z(e,r)}}}function Bt(t){let e,n,r;function o(s){t[14](s)}let i={manageHoverState:!0,filter:t[5]?void 0:["!",["get","has_match"]],paint:{"line-width":8,"line-color":Re,"line-opacity":ce(["case",["get","has_match"],.5,.2],1)}};return t[0]!==void 0&&(i.hovered=t[0]),e=new Te({props:i}),oe.push(()=>de(e,"hovered",o)),e.$on("click",t[13]),{c(){W(e.$$.fragment)},m(s,u){z(e,s,u),r=!0},p(s,u){const f={};u&32&&(f.filter=s[5]?void 0:["!",["get","has_match"]]),!n&&u&1&&(n=!0,f.hovered=s[0],ge(()=>n=!1)),e.$set(f)},i(s){r||(D(e.$$.fragment,s),r=!0)},o(s){H(e.$$.fragment,s),r=!1},d(s){Z(e,s)}}}function Jt(t){let e,n,r,o;return e=new Se({props:{data:t[3],$$slots:{default:[jt]},$$scope:{ctx:t}}}),r=new Se({props:{data:t[4],$$slots:{default:[Bt]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment),n=q(),W(r.$$.fragment)},m(i,s){z(e,i,s),k(i,n,s),z(r,i,s),o=!0},p(i,s){const u={};s&8&&(u.data=i[3]),s&1048832&&(u.$$scope={dirty:s,ctx:i}),e.$set(u);const f={};s&16&&(f.data=i[4]),s&1048609&&(f.$$scope={dirty:s,ctx:i}),r.$set(f)},i(i){o||(D(e.$$.fragment,i),D(r.$$.fragment,i),o=!0)},o(i){H(e.$$.fragment,i),H(r.$$.fragment,i),o=!1},d(i){i&&F(n),Z(e,i),Z(r,i)}}}function Ot(t){let e,n,r,o;function i(u){t[15](u)}let s={style:"https://api.maptiler.com/maps/dataviz/style.json?key=MZEJTanw3WpxRvt7qDfo",standardControls:!0,hash:!0,$$slots:{default:[Jt]},$$scope:{ctx:t}};return t[2]!==void 0&&(s.map=t[2]),n=new tt({props:s}),oe.push(()=>de(n,"map",i)),n.$on("error",t[16]),{c(){e=A("div"),W(n.$$.fragment),se(e,"slot","main"),X(e,"position","relative"),X(e,"width","100%"),X(e,"height","100vh")},m(u,f){k(u,e,f),z(n,e,null),o=!0},p(u,f){const c={};f&1048889&&(c.$$scope={dirty:f,ctx:u}),!r&&f&4&&(r=!0,c.map=u[2],ge(()=>r=!1)),n.$set(c)},i(u){o||(D(n.$$.fragment,u),o=!0)},o(u){H(n.$$.fragment,u),o=!1},d(u){u&&F(e),Z(n)}}}function Tt(t){let e,n;return e=new Xe({props:{$$slots:{main:[Ot],left:[At]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(r,o){z(e,r,o),n=!0},p(r,[o]){const i={};o&1049087&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(D(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Z(e,r)}}}let he="red",Re="blue";async function je(t){let e=await t.text(),n=JSON.parse(e),r=0;for(let o of n.features)o.id=r++,o.properties??(o.properties={});return n}function Be(t){let e=JSON.parse(JSON.stringify(t));return delete e.properties,e}function Je(t){let e=0;for(let n of t)n.id=e++;return t}const Oe=t=>t.matching_sources.length>0;function qt(t,e,n){let r,o,i=be(),s=be(),u=null,f=!0,c={buffer_meters:20,angle_diff_threshold:10,length_ratio_threshold:1.1,midpt_dist_threshold:15},p=[];Ye(async()=>{await nt()});function l(){try{n(1,p=JSON.parse(rt(JSON.stringify(i),JSON.stringify(s),c)))}catch(y){window.alert(`Bug: ${y}`);return}for(let[y,$]of s.features.entries())$.properties.has_match=p[y].matching_sources.length>0;n(4,s)}let a;async function h(y){if(!a.files)return;if(a.files.length!=2){window.alert("Select two GeoJSON files");return}try{n(3,i=await je(a.files[0])),n(4,s=await je(a.files[1])),m(),n(0,u=null),l()}catch(I){window.alert(`Bad input file: ${I}`)}}function m(){let y={type:"FeatureCollection",features:[...i.features,...s.features]};o==null||o.fitBounds($e(y),{animate:!1,padding:10})}function d(){n(3,[i,s]=[s,i],i,n(4,s)),l()}function w(y){let $=s.features[y.detail.features[0].id],I=ot($e($));Ee("sources.geojson",JSON.stringify({type:"FeatureCollection",features:Je(i.features.filter(C=>Ne(C,I)).map(Be))})),Ee("targets.geojson",JSON.stringify({type:"FeatureCollection",features:Je(s.features.filter(C=>Ne(C,I)).map(Be))}))}function g(y){u=y,n(0,u)}function _(y){o=y,n(2,o)}const E=y=>{console.log(y.detail.error)};function b(y){oe[y?"unshift":"push"](()=>{a=y,n(7,a)})}function P(){f=this.checked,n(5,f)}function S(y){c=y,n(6,c)}return t.$$.update=()=>{t.$$.dirty&3&&n(8,r=u==null?[]:p[u.id].matching_sources)},[u,p,o,i,s,f,c,a,r,l,h,m,d,w,g,_,E,b,P,S]}class Dt extends Ke{constructor(e){super(),Ue(this,e,qt,Tt,Ve,{})}}new Dt({target:document.getElementById("app")});
